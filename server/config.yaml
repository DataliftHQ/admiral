gateway:
  logger:
    pretty: true
    level: DEBUG
  accesslog:
    # log http 5xx errors by default
    status_code_filters:
      # Unknown - http.StatusInternalServerError
      - equals: 2
      # DeadlineExceeded - http.StatusInternalServerError
      - equals: 4
      # Unimplemented - http.StatusNotImplemented
      - equals: 12
      # Unavailable - http.StatusServiceUnavailable
      - equals: 14
  stats:
    flush_interval: 1s
    log_reporter: {}
  timeouts:
    default: 15s
  middleware:
    - name: admiral.middleware.stats
    - name: admiral.middleware.validate
    - name: admiral.middleware.authn
  listener:
    tcp:
      address: 0.0.0.0
      port: 8080
      secure: false
endpoints:
  - name: admiral.endpoint.healthcheck
  - name: admiral.endpoint.foo
  - name: admiral.endpoint.settings
  - name: admiral.endpoint.users
  - name: admiral.endpoint.meta
  - name: admiral.endpoint.authn
services:
  - name: admiral.service.db.postgres
    typed_config:
      "@type": types.google.com/admiral.config.service.db.postgres.v1.Config
      connection:
        host: localhost
        port: 5432
        dbname: admiral
        user: admiral
        password: secret
        ssl_mode: DISABLE
  - name: admiral.service.authn
    typed_config:
      "@type": types.google.com/admiral.config.service.authn.v1.Config
      oidc:
        issuer: http://localhost:9090/realms/admiral
        client_id: admiral
        client_secret: j10AhU98vlDegAC6dgroYc8HmvfHMEvh
        redirect_url: http://localhost:8888/auth/callback
        scopes:
          - openid
          - profile
          - email
      session_secret: secret
      enable_service_token_creation: true
  - name: admiral.service.temporal
    typed_config:
      "@type": types.google.com/admiral.config.service.temporal.v1.Config
      host: localhost
      port: 7233
